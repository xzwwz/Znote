## 📄 论文：《All You Need is DAG》

### 核心贡献

这篇论文提出了一种新的基于 DAG（有向无环图）的异步拜占庭原子广播协议，称为 **DAG-Rider**。它是首个同时满足以下三个最优性的异步协议：

* 最优的拜占庭容错能力（最多容忍 ⌊n/3⌋ 个拜占庭节点）
* 最优的摊销通信复杂度
* 最优的时间复杂度

此外，它还具有：
✅ 后量子安全（不依赖传统签名）
✅ 保证所有正确进程提出的值最终都会被有序提交
✅ 所有正确进程最终观察到相同的全序

---

### 🦈 协议设计

**DAG-Rider** 由两个层次组成：
1️⃣ **通信层**

* 每个进程不断地通过可靠广播发送消息，每个消息是一个 vertex（顶点）。
* 所有 vertex 形成一个 DAG：每个顶点引用之前的顶点（强引用和弱引用），从而形成拓扑关系。
* 可靠广播确保拜占庭节点不能欺骗、篡改历史。

2️⃣ **本地排序层**

* 每个进程只需要观察自己的本地 DAG（不需要额外通信）。
* 使用一个全局随机 coin（阈值签名实现）来选择 leader，然后基于 leader 和 DAG 结构决定交易顺序。

---

### 📊 主要性质

* **通信复杂度**：与状态最优的 Dumbo 协议相当，可摊销到线性。
* **时间复杂度**：常数期望时间内达成共识。
* **安全性**：由于不需要签名，安全性可以实现后量子安全。
* **公平性**：所有正确进程提出的值都最终被包含，而不是丢弃。

---

### 📋 与其他协议对比

| 协议        | 通信复杂度   | 时间复杂度    | 后量子安全 | 保证公平性 |
| --------- | ------- | -------- | ----- | ----- |
| VABA      | O(n²)   | O(log n) | ❌     | ❌     |
| Dumbo     | 摊销 O(n) | O(log n) | ❌     | ❌     |
| DAG-Rider | 摊销 O(n) | O(1)     | ✅     | ✅     |

---

### 🔧 技术细节

* 每个 DAG 顶点由一个进程在某一轮广播。
* 强引用保证协议安全性，弱引用保证有效性（不遗漏慢节点的提议）。
* 使用可靠广播和一个全局 coin 保证共识一致性与随机性。
* 波浪式推进 DAG，每个 wave 确定一个 leader 并提交 leader 的因果历史。

---

### 总结

这篇论文展示了通过精心设计的 DAG 构建和本地排序逻辑，可以在异步、拜占庭环境下高效地解决原子广播问题，满足分布式账本/区块链等系统的高性能和高安全性需求。

---


DAG中的每个顶点表示来自某个进程的可靠广播消息，每个消息中包含对以前广播顶点的引用等数据